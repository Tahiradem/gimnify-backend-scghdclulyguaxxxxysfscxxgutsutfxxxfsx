<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="./setting.darkMood.user.css">
    <link rel="shortcut icon" href="../images/Gymnify_header_logo.png" type="image/x-icon">
    <title>Gymnify Settings</title>
</head>
<body>
    
    <div class="main-container">
        <nav>
            <div class="logo_top"><img src="../images/Gymnify_transparent_white_only_logo.png" alt=""> Gymnify</div>
            <div class="nav_items">
                <a href="./Dashboard.html"><span><i class="fa fa-chart-line"></i></span><p>Dashboard</p></a>
                <a href="./notification.user.html"><span><i class="fa fa-bell"></i><div class="notification_red"></div></span><p>Notifications</p></a>
                <a href="../index.html"><span><i class="fa fa-home"></i></span><p>Home</p></a>
                <a href="../index.html#service"><span><i class="fa fa-tag"></i></span><p>Service</p></a>
                <a href="./payment.user.html"><span><i class="fa-regular fa-credit-card"></i></span><p>Subscription</p></a>
                <a href="./poster.html"><span><i class="fa fa-feather-pointed"></i></span><p>Digital Posters</p></a>
                <div class="line_break_nav"></div>
                <a href="" style="margin-top: 10px;"><span><i class="fa fa-gear"></i></span><p>Setting</p></a>
                <a href="./help.user.html"><span><i class="fa fa-question"></i></span><p>Help</p></a>
                <a href="./profile.user.html"><span><i class="fa fa-user"></i></span><p>Profile</p></a>
            </div>
        </nav>
        <div class="section-main">
            <div class="settings-header">
                <h1><i class="fas fa-cog"></i> Settings</h1>
                <p>Customize your Gymnify experience</p>
            </div>
            
            <div class="settings-grid">
                <div class="settings-card">
                    <div class="settings-option" onclick="toggleTheme()">
                        <div class="option-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="option-content">
                            <h3>Dark Mode</h3>
                            <p>Switch between light and dark theme</p>
                        </div>
                        <div class="option-toggle">
                            <i class="fas fa-toggle-off" id="theme-toggle"></i>
                        </div>
                    </div>
                    
                    <div class="settings-option">
                        <div class="option-icon">
                            <i class="fas fa-language"></i>
                        </div>
                        <div class="option-content">
                            <h3>Language</h3>
                            <p>Change application language</p>
                        </div>
                        <div class="option-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
                
                <div id="attendance-app" class="qr-card">
                    <div class="qr-content">
                        <h3><i class="fas fa-qrcode"></i> Attendance QR Code</h3>
                        <p>Scan this QR code for quick attendance access</p>
                        <a href="https://gymnify-user-app.onrender.com/scan/" class="qr-image">
                            <img style="height: 200px; width: 200px; object-fit: contain;"  src="../images/Gymnify_Attendance_Scanner-1024.jpeg" alt="QR Code">
                            <span>Scan or click this QR code</span>
                        </a>
                    </div>

                    

                </div>

                  <div id="user-app" class="qr-card" style="background: transparent;" >
                    <div class="qr-content">
                        <h3><i class="fas fa-qrcode"></i> Gymnify User App QR Code</h3>
                        <p>Scan this QR code for the user app</p>
                        <a href="https://gymnify-bu5z.onrender.com/login" target="_blank" class="qr-image">
                            <img style="height: 200px; width: 200px; object-fit: contain;" src="../images/Gymnify_User_App-1024.jpeg" alt="QR Code">
                            <span>Scan or click this QR code</span>
                        </a>
                    </div>
                </div>
                
                <div class="membership-container">
                    <h2><i class="fas fa-crown"></i> Membership Plans</h2>
                    <p>Configure your gym membership pricing and services</p>
                    
                    <div class="membership-grid">
                        <div class="membership-plan" id="basic">
                            <div class="plan-header">
                                <h3>Basic Plan</h3>
                                <div class="plan-accent basic-accent"></div>
                            </div>
                            <input type="number" placeholder="1 Month Price" id="basic-1">
                            <input type="number" placeholder="2 Months Price" id="basic-2">
                            <input type="number" placeholder="3 Months Price" id="basic-3">
                            <input type="number" placeholder="6 Months Price" id="basic-6">
                            <input type="number" placeholder="12 Months Price" id="basic-12">
                            <input type="text" placeholder="Services (comma-separated)" id="basic-services">
                        </div>
                        
                        <div class="membership-plan" id="plus">
                            <div class="plan-header">
                                <h3>Plus Plan</h3>
                                <div class="plan-accent plus-accent"></div>
                            </div>
                            <input type="number" placeholder="1 Month Price" id="plus-1">
                            <input type="number" placeholder="2 Months Price" id="plus-2">
                            <input type="number" placeholder="3 Months Price" id="plus-3">
                            <input type="number" placeholder="6 Months Price" id="plus-6">
                            <input type="number" placeholder="12 Months Price" id="plus-12">
                            <input type="text" placeholder="Services (comma-separated)" id="plus-services">
                        </div>
                        
                        <div class="membership-plan" id="pro">
                            <div class="plan-header">
                                <h3>Pro Plan</h3>
                                <div class="plan-accent pro-accent"></div>
                            </div>
                            <input type="number" placeholder="1 Month Price" id="pro-1">
                            <input type="number" placeholder="2 Months Price" id="pro-2">
                            <input type="number" placeholder="3 Months Price" id="pro-3">
                            <input type="number" placeholder="6 Months Price" id="pro-6">
                            <input type="number" placeholder="12 Months Price" id="pro-12">
                            <input type="text" placeholder="Services (comma-separated)" id="pro-services">
                        </div>
                    </div>
                    
                    <button class="save-button" onclick="submitMembership()">
                        <i class="fas fa-save"></i> Save Membership Plans
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function toggleTheme() {
            const toggleIcon = document.getElementById('theme-toggle');
            const isDark = document.body.classList.toggle('dark-mode');
            
            toggleIcon.classList.toggle('fa-toggle-on', isDark);
            toggleIcon.classList.toggle('fa-toggle-off', !isDark);
            localStorage.setItem('darkMode', isDark);
        }
        
        function submitMembership() {
            const email = localStorage.getItem("email");
            const membershipData = {
                Basic: {
                    "1": document.getElementById("basic-1").value,
                    "2": document.getElementById("basic-2").value,
                    "3": document.getElementById("basic-3").value,
                    "6": document.getElementById("basic-6").value,
                    "12": document.getElementById("basic-12").value,
                    "services": document.getElementById("basic-services").value.split(",").map(service => service.trim())
                },
                Plus: {
                    "1": document.getElementById("plus-1").value,
                    "2": document.getElementById("plus-2").value,
                    "3": document.getElementById("plus-3").value,
                    "6": document.getElementById("plus-6").value,
                    "12": document.getElementById("plus-12").value,
                    "services": document.getElementById("plus-services").value.split(",").map(service => service.trim())
                },
                Pro: {
                    "1": document.getElementById("pro-1").value,
                    "2": document.getElementById("pro-2").value,
                    "3": document.getElementById("pro-3").value,
                    "6": document.getElementById("pro-6").value,
                    "12": document.getElementById("pro-12").value,
                    "services": document.getElementById("pro-services").value.split(",").map(service => service.trim())
                }
            };
            
            fetch("/membership-update", {
                method: "PUT",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ membershipData, email })
            })
            .then(response => response.json())
            .then(data => {
                alert("Membership plans updated successfully!");
                // Add visual feedback here if needed
            })
            .catch(error => {
                console.error("Error submitting membership:", error);
                alert("Failed to update membership plans. Please try again.");
            });
        }
        
        // Initialize theme on load
        document.addEventListener('DOMContentLoaded', () => {
            const isDark = localStorage.getItem('darkMode') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').classList.add('fa-toggle-on');
                document.getElementById('theme-toggle').classList.remove('fa-toggle-off');
            }
        });
    </script>
</body>
</html>